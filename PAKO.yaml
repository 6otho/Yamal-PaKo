# DNS 配置
dns:
  enable: true
  listen: 0.0.0.0:53  # 本地监听地址
  enhanced-mode: fake-ip  # 使用 fake-ip 模式
  nameserver:  # 主 DNS 服务器列表（国内优先）
    - 114.114.114.114
    - 223.5.5.5
    - 8.8.8.8  # Google DNS
    - 1.1.1.1  # Cloudflare DNS
  fallback:  # 回退 DNS，用于代理域名解析
    - 1.1.1.1
    - 8.8.4.4
    - 9.9.9.9
  fallback-filter:  # 过滤无效地址
    geoip: true
    ipcidr:
      - 240.0.0.0/4
  fake-ip-filter:  # fake-ip 模式例外
    - '*.lan'
    - '*.local'
    - 'localhost'
    - '*.example.com'

# 规则提供者
rule-providers:
  private:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml
    path: ./ruleset/private.yaml
    behavior: domain
    interval: 86400
  cn_domain:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml
    path: ./ruleset/cn_domain.yaml
    behavior: domain
    interval: 86400
  Spotify_domain:
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    path: ./ruleset/Spotify_domain.yaml
    behavior: domain
    interval: 86400
  youtube_domain:
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    path: ./ruleset/youtube_domain.yaml
    behavior: domain
    interval: 86400
  google_domain:
    url: https://raw.githubusercontent.com/6otho/yamal-pako/refs/heads/main/google.yaml
    path: ./ruleset/google_domain.yaml
    behavior: domain
    interval: 86400
  netflix_domain:
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
    path: ./ruleset/netflix_domain.yaml
    behavior: domain
    interval: 86400

# 代理组
proxy-groups:
  - name: PROXY
    type: select
    proxies:
      - AUTO
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
      - KR AUTO
  - name: AUTO
    type: url-test
    proxies:
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
      - KR AUTO
    interval: 300
  - name: AIGC
    type: select
    proxies:
      - SG AUTO
      - JP AUTO
      - US AUTO
      - KR AUTO
      - PROXY
  - name: Google
    type: select
    proxies:
      - PROXY
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
      - KR AUTO
  - name: Youtube
    type: select
    proxies:
      - PROXY
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
      - KR AUTO
  - name: Netflix
    type: select
    proxies:
      - PROXY
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
      - KR AUTO

# 规则
rules:
  # 直连 vidhub1.cc
  - DOMAIN-SUFFIX,vidhub1.cc,DIRECT
  # 规则集
  - RULE-SET,Spotify_domain,Spotify
  - RULE-SET,youtube_domain,Youtube
  - RULE-SET,google_domain,Google
  - RULE-SET,netflix_domain,Netflix
  - RULE-SET,cn_domain,DIRECT
  - MATCH,PROXY
